var RichToolbar;RichToolbar=function(){function e(){return this.config=RichConfig.toolbar,this.build()}return e.prototype.build=function(){var e,t,n,i,r,a;for(n=this.config.split(/,/),i=document.createElement("div"),i.classList.add("rich-toolbar"),r=0,a=n.length;a>r;r++)e=n[r],t=document.createElement("div"),t.classList.add(e,"rich-toolbar-item"),t.innerHTML=e,i.appendChild(t);return i},e}();var Rich;new(Rich=function(){function e(){var e,t,n,i;for(this.instances=document.querySelectorAll(".rich"),this.toolbar=new RichToolbar,i=this.instances,t=0,n=i.length;n>t;t++)e=i[t],this.initiate(e);this.addListeners(),this["native"]={b:{command:"bold",type:"native"},hr:{command:"insertHorizontalRule",type:"native"},indent:{command:"indent",type:"native"},ol:{command:"insertOrderedList",type:"native"},ul:{command:"insertUnorderedList",type:"native"},i:{command:"italic",type:"native"},middle:{command:"justifyCenter",type:"native"},full:{command:"justifyFull",type:"native"},left:{command:"justifyLeft",type:"native"},right:{command:"justifyRight",type:"native"},outdent:{command:"outdent",type:"native"},unformat:{command:"removeFormat",type:"native"},all:{command:"selectAll",type:"native"},s:{command:"strikethrough",type:"native"},sub:{command:"subscript",type:"native"},sup:{command:"superscript",type:"native"},u:{command:"underline",type:"native"}},this.fakeNative={background:{command:"backColor",type:"fakeNative",prompt:"Enter a background color"},link:{command:"createLink",type:"fakeNative",prompt:"Enter the URL for the link (needs http://)"},font:{command:"fontName",type:"fakeNative",prompt:"Enter a font name"},fontSize:{command:"fontSize",type:"fakeNative",prompt:"Enter a font size (1-7)"},color:{command:"foreColor",type:"fakeNative",prompt:"Enter a foreground color"},wrap:{command:"formatBlock",type:"fakeNative",prompt:"Enter the html for format the block with"},html:{command:"insertHTML",type:"fakeNative",prompt:"Enter HTML"},image:{command:"insertImage",type:"fakeNative",prompt:"Enter an image URL"},text:{command:"insertText",type:"fakeNative",prompt:"Enter text"}}}return e.prototype.initiate=function(e){return this.createContentEditableArea(e),e.insertAdjacentHTML("afterEnd",this.toolbar.outerHTML),e.style.display="none",this.updateOriginalElement()},e.prototype.createContentEditableArea=function(e){var t,n,i;return t=document.createElement("div"),t.setAttribute("contenteditable","true"),t.classList.add("rich-textarea"),n=e.innerHTML,i=n.replace(/&lt;/g,"<"),i=i.replace(/&gt;/g,">"),t.innerHTML=i,e.insertAdjacentHTML("afterEnd",t.outerHTML)},e.prototype.addListeners=function(){var e,t,n,i,r;for(t=document.querySelectorAll(".rich-toolbar-item"),r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(e.addEventListener("mousedown",function(t){var n;return t.preventDefault(),n=t.currentTarget,e=n.classList[0],ToolbarItems[n.classList[0]]&&(e=ToolbarItems[n.classList[0]]),this.handleToolbarItemClick(e)}.bind(this)));return r},e.prototype.updateOriginalElement=function(){var e;return e=document.querySelector(".rich-textarea"),document.querySelector(".rich-toolbar").addEventListener("mouseup",this.listenerToUpdateOriginalElement),e.addEventListener("keyup",this.listenerToUpdateOriginalElement),e.addEventListener("keypress",this.forceTagLineBreaks)},e.prototype.listenerToUpdateOriginalElement=function(e){var t,n;return"mouseup"===e.type?(console.log(e.srcElement),n=e.srcElement.parentNode.nextElementSibling,t=e.srcElement.parentNode.previousElementSibling):"keyup"===e.type&&(n=e.currentTarget,t=e.currentTarget.previousElementSibling.previousElementSibling),n&&t&&t.classList.contains("rich")?t.innerHTML=n.innerHTML:void 0},e.prototype.forceTagLineBreaks=function(e){return 13===e.keyCode?document.execCommand("formatBlock",!1,"p"):void 0},e.prototype.handleToolbarItemClick=function(e){var t;return this.isNative(e)?this.isRealNative(e)?document.execCommand(this["native"][e].command):(t=prompt(this.fakeNative[e].prompt),document.execCommand(this.fakeNative[e].command,!1,t)):document.execCommand(e.command,!1,e.value)},e.prototype.isNative=function(e){return this["native"][e]||this.fakeNative[e]?!0:!1},e.prototype.isRealNative=function(e){return this["native"][e]?!0:!1},e}());