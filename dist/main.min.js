var RichToolbar;RichToolbar=function(){function t(){return this.config=RichConfig.toolbar,this.build()}return t.prototype.build=function(){var t,e,n,i,r,o;for(n=this.config.split(/,/),i=document.createElement("div"),i.classList.add("rich-toolbar"),r=0,o=n.length;o>r;r++)t=n[r],e=document.createElement("div"),e.classList.add(t,"rich-toolbar-item"),e.innerHTML=t,i.appendChild(e);return i},t}();var Rich,__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};new(Rich=function(){function t(){var t,e,n,i;for(this.instances=document.querySelectorAll(".rich"),this.toolbar=new RichToolbar,i=this.instances,e=0,n=i.length;n>e;e++)t=i[e],this.initiate(t);this.addListeners(),this["native"]={b:"bold",hr:"insertHorizontalRule",indent:"indent",ol:"insertOrderedList",ul:"insertUnorderedList",i:"italic",middel:"justifyCenter",full:"justifyFull",left:"justifyLeft",right:"justifyRight",outdent:"outdent",unformat:"removeFormat",all:"selectAll",s:"strikethrough",sub:"subscript",sup:"superscript",u:"underline"},this.fakeNative={background:"backColor",a:"createLink",font:"fontName",fontSize:"fontSize",color:"foreColor",wrap:"formatBlock",html:"insertHTML",image:"insertImage",text:"insertText"}}return t.prototype.initiate=function(t){return this.createContentEditableArea(t),t.insertAdjacentHTML("afterEnd",this.toolbar.outerHTML),t.style.display="none",this.updateOriginalElement()},t.prototype.createContentEditableArea=function(t){var e;return e=document.createElement("div"),e.setAttribute("contenteditable","true"),e.classList.add("rich-textarea"),e.innerHTML=t.innerHTML,t.insertAdjacentHTML("afterEnd",e.outerHTML)},t.prototype.addListeners=function(){var t,e,n,i,r;for(e=document.querySelectorAll(".rich-toolbar-item"),r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(t.addEventListener("mousedown",function(e){var n;return e.preventDefault(),n=e.currentTarget,t=n.classList[0],ToolbarItems[n.classList[0]]&&(t=ToolbarItems[n.classList[0]]),this.handleToolbarItemClick(t)}.bind(this)));return r},t.prototype.updateOriginalElement=function(){return document.querySelector(".rich-toolbar").addEventListener("mousedown",this.listenerToUpdateOriginalElement),document.querySelector(".rich-textarea").addEventListener("keyup",this.listenerToUpdateOriginalElement)},t.prototype.listenerToUpdateOriginalElement=function(t){var e,n;return"mousedown"===t.type?(n=t.currentTarget.parentNode.nextElementSibling,e=t.currentTarget.parentNode.previousElementSibling):"keyup"===t.type&&(n=t.currentTarget,e=t.currentTarget.previousElementSibling.previousElementSibling),n&&e&&e.classList.contains("rich")?e.innerHTML=n.innerHTML:void 0},t.prototype.handleToolbarItemClick=function(t){var e;return this.isNative(t)?this.isRealNative(t)?document.execCommand(this["native"][t]):(e=prompt(),document.execCommand(this.fakeNative[t],!1,e)):document.execCommand(t.command,!1,t.value)},t.prototype.isNative=function(t){return"string"==typeof t?!0:!1},t.prototype.isRealNative=function(t){return __indexOf.call(this["native"],t)>=0?!0:!1},t}());