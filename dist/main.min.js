var RichToolbar;RichToolbar=function(){function t(){return this.config=RichConfig.toolbar,this.build()}return t.prototype.build=function(){var t,e,n,i,a,r;for(n=this.config.split(/,/),i=document.createElement("div"),i.classList.add("rich-toolbar"),a=0,r=n.length;r>a;a++)t=n[a],e=document.createElement("div"),e.classList.add(t,"rich-toolbar-item"),e.innerHTML=t,i.appendChild(e);return i},t}();var Rich;new(Rich=function(){function t(){var t,e,n,i;for(this.instances=document.querySelectorAll(".rich"),this.toolbar=new RichToolbar,i=this.instances,e=0,n=i.length;n>e;e++)t=i[e],this.initiate(t);this.addListeners(),this["native"]={b:{command:"bold",type:"native"},hr:{command:"insertHorizontalRule",type:"native"},indent:{command:"indent",type:"native"},ol:{command:"insertOrderedList",type:"native"},ul:{command:"insertUnorderedList",type:"native"},i:{command:"italic",type:"native"},middle:{command:"justifyCenter",type:"native"},full:{command:"justifyFull",type:"native"},left:{command:"justifyLeft",type:"native"},right:{command:"justifyRight",type:"native"},outdent:{command:"outdent",type:"native"},unformat:{command:"removeFormat",type:"native"},all:{command:"selectAll",type:"native"},s:{command:"strikethrough",type:"native"},sub:{command:"subscript",type:"native"},sup:{command:"superscript",type:"native"},u:{command:"underline",type:"native"}},this.fakeNative={background:{command:"backColor",type:"fakeNative",prompt:"Enter a background color"},a:{command:"createLink",type:"fakeNative",prompt:"Enter the URL for the link (needs http://)"},font:{command:"fontName",type:"fakeNative",prompt:"Enter a font name"},fontSize:{command:"fontSize",type:"fakeNative",prompt:"Enter a font size (1-7)"},color:{command:"foreColor",type:"fakeNative",prompt:"Enter a foreground color"},wrap:{command:"formatBlock",type:"fakeNative",prompt:"Enter the html for format the block with"},html:{command:"insertHTML",type:"fakeNative",prompt:"Enter HTML"},image:{command:"insertImage",type:"fakeNative",prompt:"Enter an image URL"},text:{command:"insertText",type:"fakeNative",prompt:"Enter text"}}}return t.prototype.initiate=function(t){return this.createContentEditableArea(t),t.insertAdjacentHTML("afterEnd",this.toolbar.outerHTML),t.style.display="none",this.updateOriginalElement()},t.prototype.createContentEditableArea=function(t){var e,n,i;return e=document.createElement("div"),e.setAttribute("contenteditable","true"),e.classList.add("rich-textarea"),n=t.innerHTML,i=n.replace(/&lt;/g,"<"),i=i.replace(/&gt;/g,">"),e.innerHTML=i,t.insertAdjacentHTML("afterEnd",e.outerHTML)},t.prototype.addListeners=function(){var t,e,n,i,a;for(e=document.querySelectorAll(".rich-toolbar-item"),a=[],n=0,i=e.length;i>n;n++)t=e[n],a.push(t.addEventListener("mousedown",function(e){var n;return e.preventDefault(),n=e.currentTarget,t=n.classList[0],ToolbarItems[n.classList[0]]&&(t=ToolbarItems[n.classList[0]]),this.handleToolbarItemClick(t)}.bind(this)));return a},t.prototype.updateOriginalElement=function(){return document.querySelector(".rich-toolbar").addEventListener("mouseup",this.listenerToUpdateOriginalElement),document.querySelector(".rich-textarea").addEventListener("keyup",this.listenerToUpdateOriginalElement)},t.prototype.listenerToUpdateOriginalElement=function(t){var e,n;return"mouseup"===t.type?(console.log(t.srcElement),n=t.srcElement.parentNode.nextElementSibling,e=t.srcElement.parentNode.previousElementSibling):"keyup"===t.type&&(n=t.currentTarget,e=t.currentTarget.previousElementSibling.previousElementSibling),n&&e&&e.classList.contains("rich")?e.innerHTML=n.innerHTML:void 0},t.prototype.handleToolbarItemClick=function(t){var e;return this.isNative(t)?this.isRealNative(t)?document.execCommand(this["native"][t].command):(e=prompt(this.fakeNative[t].prompt),document.execCommand(this.fakeNative[t].command,!1,e)):document.execCommand(t.command,!1,t.value)},t.prototype.isNative=function(t){return this["native"][t]||this.fakeNative[t]?!0:!1},t.prototype.isRealNative=function(t){return this["native"][t]?!0:!1},t}());