var RichToolbar;RichToolbar=function(){function e(){return this.config=RichConfig.toolbar,this.build()}return e.prototype.build=function(){var e,t,n,r,i,o;for(n=this.config.split(/,/),r=document.createElement("div"),r.classList.add("rich-toolbar"),i=0,o=n.length;o>i;i++)e=n[i],t=document.createElement("div"),t.classList.add(e,"rich-toolbar-item"),t.innerHTML=e,r.appendChild(t);return r},e}();var Rich,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};new(Rich=function(){function e(){var e,t,n,r;for(this.instances=document.querySelectorAll(".rich"),this.toolbar=new RichToolbar,r=this.instances,t=0,n=r.length;n>t;t++)e=r[t],this.initiate(e);this.addListeners(),this["native"]=["backColor","bold","insertHorizontalRule","indent","insertOrderedList","insertUnorderedList","italic","justifyCenter","justifyFull","justifyLeft","justifyRight","outdent","paste","redo","removeFormat","selectAll","strikethrough","subscript","superscript","underline","undo","unlink"]}return e.prototype.initiate=function(e){return this.createContentEditableArea(e),e.insertAdjacentHTML("afterEnd",this.toolbar.outerHTML),e.style.display="none",this.updateOriginalElement()},e.prototype.createContentEditableArea=function(e){var t;return t=document.createElement("div"),t.setAttribute("contenteditable","true"),t.classList.add("rich-textarea"),t.innerHTML=e.innerHTML,e.insertAdjacentHTML("afterEnd",t.outerHTML)},e.prototype.addListeners=function(){var e,t,n,r,i;for(t=document.querySelectorAll(".rich-toolbar-item"),i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(e.addEventListener("mousedown",function(t){var n;return t.preventDefault(),n=t.currentTarget,(e=ToolbarItems[n.classList[0]])?this.handleToolbarItemClick(e):void 0}.bind(this)));return i},e.prototype.updateOriginalElement=function(){return document.querySelector(".rich-toolbar").addEventListener("mousedown",this.listenerToUpdateOriginalElement),document.querySelector(".rich-textarea").addEventListener("keyup",this.listenerToUpdateOriginalElement)},e.prototype.listenerToUpdateOriginalElement=function(e){var t,n;return"mousedown"===e.type?(n=e.currentTarget.parentNode.nextElementSibling,t=e.currentTarget.parentNode.previousElementSibling):"keyup"===e.type&&(n=e.currentTarget,t=e.currentTarget.previousElementSibling.previousElementSibling),n&&t&&t.classList.contains("rich")?t.innerHTML=n.innerHTML:void 0},e.prototype.handleToolbarItemClick=function(e){var t;return this.isNative(e)?this.isRealNative(e)?document.execCommand(e):(t=prompt(),document.execCommand(e,!1,t)):document.execCommand(e.command,!1,e.value)},e.prototype.isNative=function(e){return"string"==typeof e?!0:!1},e.prototype.isRealNative=function(e){return __indexOf.call(this["native"],e)>=0?!0:!1},e}());